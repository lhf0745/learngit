<!DOCTYPE html>
<html>
	<head>
		<title>校园招聘系统</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<!-- google fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i&display=swap"
		 rel="stylesheet">
		<link rel="shortcut icon" type="image/x-icon" href="assets/images/x-icon/agricul.png">

		<link rel="stylesheet" href="assets/css/relys/animate.css">
		<link rel="stylesheet" href="assets/css/relys/bootstrap.min.css">
		<link rel="stylesheet" href="assets/css/relys/all.min.css">
		<link rel="stylesheet" href="assets/css/relys/icofont.min.css">
		<link rel="stylesheet" href="assets/css/relys/lightcase.css">
		<link rel="stylesheet" href="assets/css/relys/swiper.min.css">
		<link rel="stylesheet" href="assets/css/relys/style.css">
		<style>
			html, body {
		        height: 100%;
		        margin: 0;
		    }

		    html {
		        overflow: scroll;
		    }

		</style>
	</head>
	<body>
		<!-- desktop menu start here -->
		<header class="header-section" id="app">
			<div class="header-bottom">
				<div class="header-area">
					<div class="container">
						<div class="primary-menu">
							<div class="main-area w-100">
								<div class="main-menu d-flex flex-wrap align-items-center justify-content-center w-100">
									<div class="logo px-4" style="font-weight: 600;font-size: 20px;display: flex;align-items: center;">校园招aa聘系统</div>
									<ul class="agri-ul"></li>
										<li :class="[item.url==url?'active':'', item.children.length>0?'menu-item-has-children':'']" v-for="(item, i) in navs" :key="i">
											<a :href="`javascript: onPageTap('${item.url}')`" v-if="item.yanzheng&&hstoken">{{item.name}}</a>
											<a :href="`javascript: onPageTap('${item.url}')`" v-if="!item.yanzheng&&!item.window">{{item.name}}</a>
											<a :href="`${item.url}`"  target="#" v-if="!item.yanzheng&&item.window">{{item.name}}</a>
											<ul class="agri-ul" v-if="item.children.length>0">
												<li v-for="(ele, idx) in item.children" :key="idx"><a :href="`javascript: onPageTap('${ele.url}')`">{{ele.name}}</a></li>
											</ul>
										</li>
										<li>
											<a href="pages/login/login.html">登录</a>
										</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</header>
		<!-- desktop menu ending here -->
		<!-- iframe start here -->
		<iframe src="pages/home/home.html" frameborder="0" scrolling="no" id="main" width="100%" onload="test(this)"></iframe>
		<!-- iframe ending here -->
		<!-- footer section start here -->
		<footer class="footer-section">
			<div class="container">
				<div class="footer-bottom">
					<p>&copy; 2020<a href="index.html" target="_blank"><span>校园招hh聘系统</span></a>All Rights Reserved By<a href="#" target="_blank"><span>jiuling</span></a></p>
				</div>
			</div>
		</footer>
		<!-- footer section ending here -->

		<script src="assets/js/relys/jquery.js"></script>
		<script src="assets/js/relys/fontawesome.min.js"></script>
		<script src="assets/js/relys/waypoints.min.js"></script>
		<script src="assets/js/relys/bootstrap.min.js"></script>
		<script src="assets/js/relys/wow.min.js"></script>
		<script src="assets/js/relys/swiper.min.js"></script>
		<script src="assets/js/relys/jquery.countdown.min.js"></script>
		<script src="assets/js/relys/jquery.counterup.min.js"></script>
		<script src="assets/js/relys/isotope.pkgd.min.js"></script>
		<script src="assets/js/relys/lightcase.js"></script>
		<script src="assets/js/relys/functions.js"></script>
		<script src="assets/js/relys/vue.js"></script>
		<script src="assets/js/api/api.js"></script>
		<script src="assets/js/api/defaultuser.js"></script>
		<script src="assets/js/api/tplist.js"></script>
		<script type="text/javascript">
			var app = new Vue({
				el: "#app",
				data: {
					hstoken: false,
					url: '',
					navs: [
						{
							name: '首页',
							url: './pages/home/home.html',
							children: []
						},
						{
							name: '招聘信息模块'.split('模块')[0],
							url: './pages/zhaopinxinxi/list.html',
							children: [
							]
						},
						{
							name: '求职者信息模块'.split('模块')[0],
							url: './pages/qiuzhizhexinxi/list.html',
							children: [
							]
						},
						{
							name: '友情链接模块'.split('模块')[0],
							url: './pages/youqinglianjie/list.html',
							children: [
							]
						},
						{
							name: '留言板',
							url: "pages/blog/blog-list.html",
							children: []
						},
						{
							name: '个人中心',
							url: './pages/personal/personal.html',
							yanzheng: true,
							children: [
								{
									name: '我的收藏',
									url: './pages/storeup/list.html'
								},
							]
						}
					]
				},
				created() {
							var obj = [
								{
									menuname: "招聘信息列表".split('列表')[0],
									menutable: "zhaopinxinxi",
									buttons: [
										"新增",
										"查看",
										"修改",
										"删除",
										"应聘",
									]
								},
								{
									menuname: "求职者信息列表".split('列表')[0],
									menutable: "qiuzhizhexinxi",
									buttons: [
										"新增",
										"查看",
										"修改",
										"删除",
									]
								},
								{
									menuname: "友情链接列表".split('列表')[0],
									menutable: "youqinglianjie",
									buttons: [
										"新增",
										"查看",
										"修改",
										"删除",
									]
								},
							]
					localStorage.setItem("daohangmenus", JSON.stringify(obj))
					var obj2 = {
						yonghu: [
							{
								menuname: "求职者信息列表".split('列表')[0],
								menutable: "qiuzhizhexinxi",
								buttons: [
									"新增",
									"查看",
									"修改",
									"删除",
								]
							},
							{
								menuname: "应聘信息列表".split('列表')[0],
								menutable: "yingpinxinxi",
								buttons: [
									"查看",
								]
							},
						],
						qiyexinxi: [
							{
								menuname: "招聘信息列表".split('列表')[0],
								menutable: "zhaopinxinxi",
								buttons: [
									"新增",
									"查看",
									"修改",
									"删除",
								]
							},
							{
								menuname: "应聘信息列表".split('列表')[0],
								menutable: "yingpinxinxi",
								buttons: [
									"查看",
									"删除",
									"审核",
								]
							},
						],
					}
					localStorage.setItem("frontRoleMenus", JSON.stringify(obj2))
					var url = baseurl + "admin/dist/index.html#/login"
					if(preview=="否"&&neturl){
						url = neturl + "admin/dist/index.html#/login"
					}
					this.navs.push({
						name: '后台管理',
						url,
						window: true,
						children: []
					})
				},
				methods: {
					onPageTap(url) {
						$('#main').attr('src', url);
					},
				}
			})
			//获取子页面的高度
			function reinitIframe() {
				var childPageH = $('#main').contents().find('#app').height();
				$('#main').height(childPageH);
			}
			window.setInterval("reinitIframe()", 200);

			function onPageTap(url) {
				$('#main').attr('src', url);
			}
			function test(that){
				that.height = 0
				app.url=$('#main').attr('src')
				console.log(app.url)
			}
			setInterval(function() {
				var token = localStorage.getItem('Token')
				app.hstoken = token ? true : false
			}, 1000)
		</script>
	</body>
</html>
